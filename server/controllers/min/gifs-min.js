function formatGifObjects(t){var e=t.map(function(t){return{url:t.images.fixed_height.url,dislikes:0,likes:0,shares:0,tags:["cat"],deleted:!1}});return debug(e),e}var gif=require("../models/gif"),debug=require("debug")("tif:controllers:gifs"),request=require("request");exports.get=function(t,e,s){gif.find({_id:"55f637adfb89ae4e186692eb"},function(t,s){return debug(t,s),t?e.status(500).json(t):e.status(200).json(s)})},exports.create=function(t,e,s){debug(t.body);var n=t.body;n.tags=n.tags.split(","),gif.create(n,function(t,s){return debug(t,s),t?e.status(500).json(t):e.status(200).json(s)})},exports.like=function(t,e){debug(t.params.id);var s={_id:t.params.id};gif.findOneAndUpdate(s,{$inc:{likes:1}},{"new":!0},function(t,s){return debug(t,s),t?e.status(500).json(t):e.status(200).json(s)})},exports.dislike=function(t,e){var s={_id:t.params.id};gif.findOneAndUpdate(s,{$inc:{dislikes:1}},{"new":!0},function(t,s){return debug(t,s),t?e.status(500).json(t):e.status(200).json(s)})},exports.search=function(t,e){debug(t.query);var s={tags:t.query.tag};gif.find(s,function(s,n){return debug(s,n),s?e.status(500).json(s):n.length>0?e.status(200).json(n):(debug("None shall pass!"),void request("http://api.giphy.com/v1/gifs/search?q="+t.query.tag+"&api_key=dc6zaTOxFJmzC",function(t,s,n){if(debug("Error: ",t),t)return e.status(500).json(t);var r=JSON.parse(n).data,u=formatGifObjects(r);debug("formattedObjects: ",u),gif.create(u,function(t,s){return debug(t,s),t?e.status(500).json(t):e.status(200).json(s)})}))})};